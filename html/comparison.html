<!DOCTYPE html>
<html>
<head>
<title>Paper Picker</title>

<link rel="stylesheet" type="text/css" href="../css/comparison.css" >
<script src="../javascript/sessvars.js"></script>
<script src="../library/jquery-2.0.3.min.js"></script>
<script src="../library/jquery.transit.min.js"></script>
<script src = "http://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.js"></script>
<script src="../javascript/getarticle.js"></script>
<script src="../javascript/getrequest.js"></script>
</head>

<body>

<script>
var position="loading";

var newspapers = ["BBC", "daily mail", "the guardian", "telegraph", "the sun", "the times"];
var values = ["0", "0", "0", "0", "0", "0"];
var sources = ["unknown", "unknown"];

resetTexts();

$(document).ready(function() {
$( "#textbox1" ).click(function() {
	if(sources[1]==="BBC") {values[0]=1;} if(sources[1]==="daily mail") {values[1]=1;}
	if(sources[1]==="the guardian") {values[2]=1;} if(sources[1]==="telegraph") {values[3]=1;}
	if(sources[1]==="the sun") {values[4]=1;} if(sources[1]==="the times") {values[5]=1;}
	if(position != "loading") {
		$( "#headlineA" ).text("LOADING");
		$( "#textA" ).text("...");
		$( "#headlineB" ).text("LOADING");
		$( "#textB" ).text("...");
		position="loading";
		console.log("../php/db_request.php?user_id=test&bbc="+values[0]+"&dailymail="+values[1]+"&guardian="+values[2]+"&telegraph="+values[3]
					+"&sun="+values[4]+"&times"+values[5]);
		httpGet("../php/db_request.php?user_id=test&bbc="+values[0]+"&dailymail="+values[1]+"&guardian="+values[2]+"&telegraph="+values[3]
					+"&sun="+values[4]+"&times"+values[5]);
		resetTexts();
	}
});
$( "#textbox2" ).click(function() {
	if(sources[0]==="BBC") {values[0]=1;} if(sources[0]==="daily mail") {values[1]=1;}
	if(sources[0]==="the guardian") {values[2]=1;} if(sources[0]==="telegraph") {values[3]=1;}
	if(sources[0]==="the sun") {values[4]=1;} if(sources[0]==="the times") {values[5]=1;}
	if(position != "loading") {
		$( "#headlineA" ).text("LOADING");
		$( "#textA" ).text("...");
		$( "#headlineB" ).text("LOADING");
		$( "#textB" ).text("...");
		console.log("../php/db_request.php?user_id=test&bbc="+values[0]+"&dailymail="+values[1]+"&guardian="+values[2]+"&telegraph="+values[3]
					+"&sun="+values[4]+"&times"+values[5]);
		httpGet("../php/db_request.php?user_id=test&bbc="+values[0]+"&dailymail="+values[1]+"&guardian="+values[2]+"&telegraph="+values[3]
					+"&sun="+values[4]+"&times"+values[5]);
		position="loading";
		resetTexts();
	}
});
});
function resetTexts() {
	var article = Math.round(Math.random()*2);

	sources[0] = newspapers[Math.round(Math.random()*5)];
	sources[1] = newspapers[Math.round(Math.random()*5)];
	
	getArticle(article, sources[0], function(link) {
		getUrl(link, function(data) {
			console.log(link);
			var title = data.objects[0].title;
			var text = data.objects[0].text;
			textsentences = text.split(".", 3);
			text = textsentences.toString().concat(".");
			$('#headlineB').text(title);
			$('#textB').text(text);
		});
	});
	getArticle(article, sources[1], function(link) {
		getUrl(link, function(data) {
			console.log(link);
			var title = data.objects[0].title;
			var text = data.objects[0].text;
			textsentences = text.split(".", 3);
			text = textsentences.toString().concat(".");
			$('#headlineA').text(title);
			$('#textA').text(text);

			position = "loaded";
		});
	});
}
</script>

<div id="container">
  <div id="headline">
    <h1>
      Which of these do you agree with?
    </h1>
  </div>

    <a href="index.html"><div id="urlbutton" class="leftbutton"></div></a>

	<div class="textbox" id ="textbox1">
	  <div class="tagline" id ="headlineA">
		LOADING
	  </div>
	  <div class="text" id ="textA">
	  ...
	  </div>
	</div>

	<div class="textbox" id ="textbox2">
	  <div class="tagline" id ="headlineB">
		LOADING
	  </div>
	  <div class="text" id ="textB">
	  ...
	  </div>
	</div>
</div>

</body>
</html>
